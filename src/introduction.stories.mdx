import { Meta } from '@storybook/addon-docs/blocks'
import { useState } from 'react'
import {
  addRandomEdge,
  addRandomNode,
  Graph,
  GraphModel,
  GraphToolbar,
  cytoscapeRenderer,
} from './'
import { Row, ThemeProvider } from '@committed/components'

<Meta title="Introduction/Graph" />

# Committed Components Graph

[![Committed Badge](https://img.shields.io/endpoint?url=https%3A%2F%2Fcommitted.software%2Fbadge)](https://committed.io)
![Build Status](https://github.com/commitd/components-graph/workflows/build/badge.svg?branch=main)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=commitd_components-graph&metric=alert_status&token=aa002ca75e2f3a6d028af9074bceeda1ffa2f9f7)](https://sonarcloud.io/dashboard?id=commitd_components-graph)
[![Coverage](https://sonarcloud.io/api/project_badges/measure?project=commitd_components-graph&metric=coverage&token=aa002ca75e2f3a6d028af9074bceeda1ffa2f9f7)](https://sonarcloud.io/dashboard?id=commitd_components-graph)
![GitHub repo size](https://img.shields.io/github/repo-size/commitd/components-graph)

A graph visualisation to be used in Committed products. It supports custom decoration, different layouts and user interactions.

<ThemeProvider>
  {React.createElement(() => {
    const [model, setModel] = React.useState(
      addRandomEdge(addRandomNode(GraphModel.createEmpty(), 20), 15)
    )
    return (
      <Row bgcolor="background.default" mb={3} style={{ border: '2px solid' }}>
        <GraphToolbar
          direction="column"
          model={model}
          onModelChange={setModel}
        />
        <Graph
          model={model}
          onModelChange={setModel}
          renderer={cytoscapeRenderer}
          options={{ height: 600 }}
        />
      </Row>
    )
  })}
</ThemeProvider>

## üöÄ Quickstart

For use with [`@committed/components`](https://github.com/commitd/components),

```bash
yarn add @committed/components-graph
```

add any missing peer dependencies

```bash
yarn add @committed/components @material-ui/core @material-ui/icons react react-dom
```

### Usage

```tsx
import React from 'react'
import ReactDOM from 'react-dom'
import {
  addRandomEdge,
  addRandomNode,
  Graph,
  GraphModel,
  GraphToolbar,
  cytoscapeRenderer,
} from '@committed/components-graph'
import { Row, ThemeProvider } from '@committed/components'

const App: React.FC = () => {
  const [model, setModel] = React.useState(
    addRandomEdge(addRandomNode(GraphModel.createEmpty(), 20), 15)
  )
  return (
    <ThemeProvider>
      <Row>
        <GraphToolbar
          direction="column"
          model={model}
          onModelChange={setModel}
        />
        <Graph
          model={model}
          onModelChange={setModel}
          renderer={cytoscapeRenderer}
          options={{ height: 600 }}
        />
      </Row>
    </ThemeProvider>
  )
}

ReactDOM.render(<App />, document.getElementById('root'))
```

## üíª Development

On first use run `yarn install` in both the root folder and the example folder.

The main build is currently performed using:

```bash
yarn build
```

For development use

```bash
yarn start
```

the same commands can be run in the example folder to run a usage example.

## ¬©Ô∏è License

[MIT](/LICENSE) - ¬© Committed Software 2020 https://committed.io
